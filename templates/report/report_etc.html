{% extends 'report/base.html' %}
{% load staticfiles %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/timeline.css' %}">
<script src="https://use.typekit.net/bkt6ydm.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>


<div class="col-md-12 etc-title">
  <h2>사건 타임라인</h2>
  <p>시간적 순서대로, 천천히 써보세요.</p>
</div>

<div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
  <ul class="timeline timeline-split">
    <li class="timeline-item period">
        <div class="timeline-info"></div>
      <div class="timeline-marker"></div>
        <div class="timeline-content">
            <h2 class="timeline-title"><input type='text' class='form-control input-lg' name=date></h2>
        </div>
    </li>


    <li class="timeline-item">
      <div class="timeline-info">
        <button type="button" class="btn btn-default" onclick="remove_timeline(this)">
          <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
        </button>
        <span>시간 셀렉터를 넣어야함</span>
      </div>
      <div class="timeline-marker"></div>
      <div class="timeline-content">
          <textarea class="form-control" rows="3"></textarea>
      </div>
    </li>
  </ul>
</div>

<button type="button" class="btn btn-default" onclick="create_timeline()">
  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 사건 추가하기
</button>

<script>
    var format = 'YYYY년 M월 D일';
    var date = moment().format(format);
    $(function () {
        $('input[name="date"]').daterangepicker({
          singleDatePicker: true,
          showDropdowns: true
        },
        function (_start, _end, label) {
            date = _start.format(format);
        });
    });

    function remove_timeline(el) {
      console.log(el);
      var item = el.parentNode.parentNode;
      item.remove();
    }
    function create_timeline() {
      var item = document.createElement('li');
      item.setAttribute('class', 'timeline-item');

      console.log(item);

      var info = document.createElement('div');
      info.setAttribute('class', 'timeline-info');

      var removeBtn = document.createElement('button');
      removeBtn.setAttribute('type', 'button');
      removeBtn.setAttribute('class', 'btn btn-default');
      removeBtn.onclick = function() { remove_timeline(this); };
      removeBtn.innerHTML = '<span class="glyphicon glyphicon-minus" aria-hidden="true"></span>';

      info.appendChild(removeBtn);

      var marker = document.createElement('div');
      marker.setAttribute('class', 'timeline-marker');

      var content = document.createElement('div');
      content.setAttribute('class', 'timeline-content');


      var textarea = document.createElement('textarea');
      textarea.setAttribute('class', 'form-control');
      content.append(textarea);

      item.appendChild(info);
      item.appendChild(marker);
      item.appendChild(content);

      document.querySelector('ul.timeline').appendChild(item);
    }
</script>

{% endblock %}
